## -*- shell-script -*- ######################################################
##                                                                          ##
##  JBoss Bootstrap Script Configuration                                    ##
##  Derived from the Default Bootstrap Script                               ##
##  Written by Juergen Hoffmann <jhoffmann@redhat.com>                      ##
##############################################################################

LANG="en_US.UTF-8"
export LANG

### Please change port
PORT_OFFSET="100"

# Specify the maximum file descriptor limit, use "max" or "maximum" to use
# the default, as queried by the system.
#
# Defaults to "maximum"
#
#MAX_FD="maximum"

# Specify the JBoss Profiler configuration file to load.
# Default is to not load a JBoss Profiler configuration file.
#PROFILER=""

# Specify the location of the Java home directory.  If set then $JAVA will
# be defined to $JAVA_HOME/bin/java, else $JAVA will be "java".
#JAVA_HOME="/usr/java/jdk1.6.0"

# Specify the exact Java VM executable to use.
#JAVA=""

# Specify options to pass to the Java VM.
if [ "x$JAVA_OPTS" = "x" ]; then
   JAVA_OPTS="-Xms1303m -Xmx1303m -XX:MaxPermSize=256m -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Dsun.lang.ClassLoader.allowArraySyntax=true"
fi

## Specify the Security Manager options
#JAVA_OPTS="$JAVA_OPTS -Djava.security.manager -Djava.security.policy=$POLICY"

# Sample JPDA settings for remote socket debugging
#JAVA_OPTS="$JAVA_OPTS -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n"

# Sample JPDA settings for shared memory debugging
#JAVA_OPTS="$JAVA_OPTS -Xrunjdwp:transport=dt_shmem,address=jboss,server=y,suspend=n"

# Show the Profile Name in the Commandline
JAVA_OPTS="-D[@PROFILE_NAME@]"

# see http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp
JAVA_OPTS="${JAVA_OPTS} -server"
JAVA_OPTS="${JAVA_OPTS} -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Dsun.lang.ClassLoader.allowArraySyntax=true"
JAVA_OPTS="${JAVA_OPTS} -Djava.awt.headless=true"
JAVA_OPTS="${JAVA_OPTS} -Xms640m -Xmx1026m"
JAVA_OPTS="${JAVA_OPTS} -XX:+DisableExplicitGC"
JAVA_OPTS="${JAVA_OPTS} -XX:MaxPermSize=128m"
JAVA_OPTS="${JAVA_OPTS} -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/data/jboss-apps/@PROFILE_NAME@/jboss-logs/heap"
#Disabled due to JDK 1.6 bug
#JAVA_OPTS="${JAVA_OPTS} -XX:+AggressiveOpts"
JAVA_OPTS="${JAVA_OPTS} -XX:+UseFastAccessorMethods"
JAVA_OPTS="${JAVA_OPTS} -XX:+UseStringCache"
#JAVA_OPTS="${JAVA_OPTS} -XX:+UseCompressedStrings" # DISABLED for OpenJDK160
JAVA_OPTS="${JAVA_OPTS} -XX:+OptimizeStringConcat"
JAVA_OPTS="${JAVA_OPTS} -XX:+UseCompressedOops"

#JAVA_OPTS="${JAVA_OPTS} -XX:+UseLargePages"

# GC
# Throughput
# JAVA_OPTS="${JAVA_OPTS} -XX:+UseParallelGC -XX:+UseParallelOldGC"
# JAVA_OPTS="${JAVA_OPTS} -XX:ParallelGCThreads=4"
# Low Pause
# JAVA_OPTS="${JAVA_OPTS} -XX:+UseConcMarkSweepGC -XX:+UseParNewGC"
# JAVA_OPTS="${JAVA_OPTS} -XX:+CMSParallelRemarkEnabled"

# VFS Patch: JBPAPP-3793
JAVA_OPTS="${JAVA_OPTS} -Djboss.vfs.forceCanonical=true"

### Please change port
JAVA_OPTS="${JAVA_OPTS} -Djboss.socket.binding.port-offset=${PORT_OFFSET}"

### Uncomment the next lines if the Wily Introscope agent is already installed and set up properly
#WILY_OPTS="${WILY_OPTS} -Djboss.modules.system.pkgs=com.wily"
#WILY_OPTS="${WILY_OPTS} -javaagent:/data/Introscope/wily/Agent.jar"
#WILY_OPTS="${WILY_OPTS} -Dcom.wily.introscope.agentProfile=/data/Introscope/wily/core/config/IntroscopeAgent.profile"
#WILY_OPTS="${WILY_OPTS} -Dcom.wily.introscope.agent.agentName=@PROFILE_NAME@"
#JAVA_OPTS="${JAVA_OPTS} ${WILY_OPTS}"
